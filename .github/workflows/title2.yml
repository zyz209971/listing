- name: 分步测试
  run: |
    # 1. 先只安装
    pip install beautifulsoup4
    
    # 2. 单独测试安装
    python -c "import bs4; print('第一步：BeautifulSoup安装成功')"
    
    # 3. 安装另一个库
    pip install googletrans==3.1.0a0
    
    # 4. 测试第二个库
    python -c "from googletrans import Translator; print('第二步：Translator安装成功')"
    
    # 5. 完整测试
    python << 'EOF'
print('开始完整测试...')
try:
    from bs4 import BeautifulSoup
    from googletrans import Translator
    print('✅ 所有库导入成功')
    
    # 测试文件读取
    with open('page.html', 'r', encoding='utf-8') as f:
        soup = BeautifulSoup(f, 'html.parser')
        title = soup.find('title')
        if title:
            print(f'找到标题: {title.text[:30]}...')
        else:
            print('未找到标题标签')
except Exception as e:
    print(f'❌ 错误: {e}')
EOF
